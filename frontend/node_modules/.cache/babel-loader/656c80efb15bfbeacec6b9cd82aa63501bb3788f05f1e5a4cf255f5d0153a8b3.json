{"ast":null,"code":"import React,{Fragment,useEffect,useState}from'react';import{Link,useNavigate}from'react-router-dom';import{Disclosure,Menu,Transition}from'@headlessui/react';import{Bars3Icon,XMarkIcon,UserCircleIcon,BellIcon,SunIcon,MoonIcon}from'@heroicons/react/24/outline';import{toast}from'react-toastify';import axios from'axios';import{useTranslation}from'react-i18next';import{useTheme}from'../hooks/useTheme';import{useNotifications}from'../hooks/useNotifications';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const navigation=[{name:'Home',href:'/',current:true},{name:'Knowledge Base',href:'/knowledge-base',current:false},{name:'Analytics',href:'/analytics',current:false},{name:'Recommendations',href:'/recommendations',current:false},{name:'Bookmarks',href:'/bookmarks',current:false},{name:'Reading History',href:'/history',current:false}];function classNames(){for(var _len=arguments.length,classes=new Array(_len),_key=0;_key<_len;_key++){classes[_key]=arguments[_key];}return classes.filter(Boolean).join(' ');}export default function Navbar(){const navigate=useNavigate();const token=localStorage.getItem('token');const[showNotifications,setShowNotifications]=useState(false);const{t,i18n}=useTranslation();const{theme,toggleTheme}=useTheme();const{notifications,loadingNotifications,fetchNotifications,markAsRead,setNotifications}=useNotifications();useEffect(()=>{const root=window.document.documentElement;root.classList.remove('light','dark');root.classList.add(theme);},[theme]);useEffect(()=>{if(token){fetchNotifications();}},[token,fetchNotifications]);const handleLogout=function(){let message=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'Logged out successfully';localStorage.removeItem('token');toast.success(message);navigate('/login');};return/*#__PURE__*/_jsx(Disclosure,{as:\"nav\",className:\"bg-white/60 backdrop-blur-md border border-white/40 shadow-lg rounded-xl dark:bg-gray-900 dark:backdrop-blur-none dark:border-gray-800 dark:shadow dark:rounded-none fixed top-0 left-0 w-full z-50 border-b border-gray-100\",children:_ref=>{let{open}=_ref;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-16 justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-shrink-0 items-center\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-2xl font-bold text-primary-600 dark:text-primary-200\",children:\"NewsAI\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"hidden sm:ml-6 sm:flex sm:space-x-8\",children:navigation.map(item=>/*#__PURE__*/_jsx(Link,{to:item.href,className:classNames(item.current?'border-primary-500 text-gray-900 dark:text-primary-200':'border-transparent text-gray-500 dark:text-gray-300 hover:border-gray-300 dark:hover:border-gray-700 hover:text-gray-700 dark:hover:text-primary-100','inline-flex items-center border-b-2 px-1 pt-1 text-sm font-medium'),children:t(item.name)},item.name))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"hidden sm:ml-6 sm:flex sm:items-center\",children:token?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative mr-4\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"relative focus:outline-none\",onClick:()=>setShowNotifications(v=>!v),children:[/*#__PURE__*/_jsx(BellIcon,{className:\"h-7 w-7 text-gray-400 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-200\"}),notifications.some(n=>!n.read)&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute top-0 right-0 block h-2 w-2 rounded-full ring-2 ring-white bg-red-500\"})]}),showNotifications&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-900 shadow-lg rounded-md z-50 max-h-96 overflow-y-auto border border-gray-100 dark:border-gray-800\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-b font-semibold text-gray-700 dark:text-gray-200 border-gray-100 dark:border-gray-800\",children:t('Notifications')}),notifications.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"p-4 text-gray-500 dark:text-gray-300\",children:t('No notifications')}):notifications.map(n=>/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-3 border-b cursor-pointer \".concat(n.read?'bg-white dark:bg-gray-900':'bg-blue-50 dark:bg-blue-900/30 font-semibold',\" border-gray-100 dark:border-gray-800\"),onClick:()=>markAsRead(n._id),children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-800 dark:text-gray-100\",children:n.message}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400 dark:text-gray-300 mt-1\",children:new Date(n.createdAt).toLocaleString()})]},n._id))]})]}),/*#__PURE__*/_jsxs(\"select\",{onChange:e=>i18n.changeLanguage(e.target.value),value:i18n.language,className:\"ml-4 px-2 py-1 rounded border border-gray-300 dark:border-gray-700 text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100\",style:{minWidth:80},children:[/*#__PURE__*/_jsx(\"option\",{value:\"en\",children:\"English\"}),/*#__PURE__*/_jsx(\"option\",{value:\"hi\",children:\"\\u0939\\u093F\\u0928\\u094D\\u0926\\u0940\"})]}),/*#__PURE__*/_jsxs(Menu,{as:\"div\",className:\"relative ml-3\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Menu.Button,{className:\"flex rounded-full bg-white dark:bg-gray-900 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2\",children:/*#__PURE__*/_jsx(UserCircleIcon,{className:\"h-8 w-8 text-gray-400 dark:text-gray-200\",\"aria-hidden\":\"true\"})})}),/*#__PURE__*/_jsx(Transition,{as:Fragment,enter:\"transition ease-out duration-200\",enterFrom:\"transform opacity-0 scale-95\",enterTo:\"transform opacity-100 scale-100\",leave:\"transition ease-in duration-75\",leaveFrom:\"transform opacity-100 scale-100\",leaveTo:\"transform opacity-0 scale-95\",children:/*#__PURE__*/_jsxs(Menu.Items,{className:\"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white dark:bg-gray-900 py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none border border-gray-100 dark:border-gray-800\",children:[/*#__PURE__*/_jsx(Menu.Item,{children:_ref2=>{let{active}=_ref2;return/*#__PURE__*/_jsx(Link,{to:\"/profile\",className:classNames(active?'bg-gray-100 dark:bg-gray-800':'','block px-4 py-2 text-sm text-gray-700 dark:text-gray-200'),children:t('Your Profile')});}}),/*#__PURE__*/_jsx(Menu.Item,{children:_ref3=>{let{active}=_ref3;return/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleLogout(),className:classNames(active?'bg-gray-100 dark:bg-gray-800':'','block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-200'),children:t('Sign out')});}})]})})]}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleTheme,className:\"ml-2 rounded-full p-2 bg-gradient-to-br from-blue-100 to-purple-100 dark:from-gray-800 dark:to-gray-700 border border-gray-200 dark:border-gray-700 shadow hover:scale-110 transition-transform focus:outline-none\",title:theme==='dark'?'Switch to light mode':'Switch to dark mode',\"aria-label\":\"Toggle dark mode\",children:theme==='dark'?/*#__PURE__*/_jsx(SunIcon,{className:\"h-6 w-6 text-yellow-400\"}):/*#__PURE__*/_jsx(MoonIcon,{className:\"h-6 w-6 text-gray-700\"})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"space-x-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"text-gray-500 hover:text-gray-700 px-3 py-2 text-sm font-medium\",children:t('Sign in')}),/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"bg-primary-600 text-white hover:bg-primary-700 px-3 py-2 rounded-md text-sm font-medium\",children:t('Sign up')})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"-mr-2 flex items-center sm:hidden\",children:/*#__PURE__*/_jsxs(Disclosure.Button,{className:\"inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Open main menu\"}),open?/*#__PURE__*/_jsx(XMarkIcon,{className:\"block h-6 w-6\",\"aria-hidden\":\"true\"}):/*#__PURE__*/_jsx(Bars3Icon,{className:\"block h-6 w-6\",\"aria-hidden\":\"true\"})]})})]})}),/*#__PURE__*/_jsxs(Disclosure.Panel,{className:\"sm:hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"space-y-1 pb-3 pt-2\",children:navigation.map(item=>/*#__PURE__*/_jsx(Disclosure.Button,{as:Link,to:item.href,className:classNames(item.current?'bg-primary-50 border-primary-500 text-primary-700':'border-transparent text-gray-500 hover:bg-gray-50 hover:border-gray-300 hover:text-gray-700','block border-l-4 py-2 pl-3 pr-4 text-base font-medium'),children:item.name},item.name))}),token?/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 pb-3 pt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center px-4\",children:[/*#__PURE__*/_jsx(UserCircleIcon,{className:\"h-10 w-10 text-gray-300\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-base font-medium text-gray-800\",children:\"User\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-500\",children:\"user@example.com\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 space-y-1\",children:[/*#__PURE__*/_jsx(Disclosure.Button,{as:Link,to:\"/profile\",className:\"block px-4 py-2 text-base font-medium text-gray-500 hover:bg-gray-100 hover:text-gray-800\",children:t('Your Profile')}),/*#__PURE__*/_jsx(Disclosure.Button,{as:\"button\",onClick:()=>handleLogout(),className:\"block w-full text-left px-4 py-2 text-base font-medium text-gray-500 hover:bg-gray-100 hover:text-gray-800\",children:t('Sign out')})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-200 pb-3 pt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[/*#__PURE__*/_jsx(Disclosure.Button,{as:Link,to:\"/login\",className:\"block px-4 py-2 text-base font-medium text-gray-500 hover:bg-gray-100 hover:text-gray-800\",children:\"Sign in\"}),/*#__PURE__*/_jsx(Disclosure.Button,{as:Link,to:\"/register\",className:\"block px-4 py-2 text-base font-medium text-gray-500 hover:bg-gray-100 hover:text-gray-800\",children:\"Sign up\"})]})})]})]});}});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}