{"ast":null,"code":"import _objectSpread from\"C:/Users/Manish singh/Desktop/personalized-news/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import axios from'axios';import{toast}from'react-toastify';import'./HomeModern.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Profile(){const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const[formData,setFormData]=useState({name:'',email:'',bio:'',profilePicture:'',interests:[],currentPassword:'',newPassword:'',confirmPassword:''});const availableInterests=['technology','science','business','health','entertainment','sports','politics','education'];useEffect(()=>{fetchUserProfile();},[]);const fetchUserProfile=async()=>{try{const token=localStorage.getItem('token');const res=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/user/profile\"),{headers:{'x-auth-token':token}});setUser(res.data);setFormData(_objectSpread(_objectSpread({},formData),{},{name:res.data.name,email:res.data.email,bio:res.data.bio||'',profilePicture:res.data.profilePicture||'',interests:res.data.interests||[]}));setLoading(false);}catch(err){toast.error('Failed to fetch profile');setLoading(false);}};const handleSubmit=async e=>{e.preventDefault();try{const token=localStorage.getItem('token');await axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/api/user/profile\"),{name:formData.name,bio:formData.bio,profilePicture:formData.profilePicture,interests:formData.interests,currentPassword:formData.currentPassword,newPassword:formData.newPassword},{headers:{'x-auth-token':token}});toast.success('Profile updated successfully');setFormData(_objectSpread(_objectSpread({},formData),{},{currentPassword:'',newPassword:'',confirmPassword:''}));fetchUserProfile();}catch(err){var _err$response,_err$response$data;toast.error(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.msg)||'Failed to update profile');}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600\"})});}return/*#__PURE__*/_jsx(\"div\",{className:\"modern-bg min-h-screen py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-2xl p-10 border border-gray-100\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-extrabold text-primary-700 mb-8 tracking-tight drop-shadow\",children:\"Profile Settings\"}),formData.profilePicture&&/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-6\",children:/*#__PURE__*/_jsx(\"img\",{src:formData.profilePicture,alt:\"Profile\",className:\"w-28 h-28 rounded-full object-cover border-4 border-primary-500 shadow-lg\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"profilePicture\",className:\"block text-sm font-medium text-gray-700\",children:\"Profile Picture URL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"profilePicture\",value:formData.profilePicture,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{profilePicture:e.target.value})),className:\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\",placeholder:\"Paste image URL here\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:\"block text-sm font-medium text-gray-700\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name\",value:formData.name,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{name:e.target.value})),className:\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"bio\",className:\"block text-sm font-medium text-gray-700\",children:\"Bio\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"bio\",value:formData.bio,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{bio:e.target.value})),className:\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\",rows:3,placeholder:\"Tell us about yourself...\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Interests\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:availableInterests.map(interest=>/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-1 text-sm px-3 py-1 rounded-full cursor-pointer font-semibold shadow-sm transition-all \".concat(formData.interests.includes(interest)?'bg-gradient-to-r from-blue-500 to-purple-500 text-white':'bg-gray-100 text-gray-700 hover:bg-blue-100'),children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:formData.interests.includes(interest),onChange:()=>{setFormData(prev=>{const newInterests=prev.interests.includes(interest)?prev.interests.filter(i=>i!==interest):[...prev.interests,interest];return _objectSpread(_objectSpread({},prev),{},{interests:newInterests});});},className:\"accent-primary-600\"}),interest.charAt(0).toUpperCase()+interest.slice(1)]},interest))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium text-gray-700\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",value:formData.email,disabled:true,className:\"mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 pt-8 mt-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-primary-700 mb-6\",children:\"Change Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"currentPassword\",className:\"block text-sm font-medium text-gray-700\",children:\"Current Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"currentPassword\",value:formData.currentPassword,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{currentPassword:e.target.value})),className:\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"newPassword\",className:\"block text-sm font-medium text-gray-700\",children:\"New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"newPassword\",value:formData.newPassword,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{newPassword:e.target.value})),className:\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",className:\"block text-sm font-medium text-gray-700\",children:\"Confirm New Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"confirmPassword\",value:formData.confirmPassword,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{confirmPassword:e.target.value})),className:\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"inline-flex justify-center py-2 px-6 border border-transparent shadow-md text-base font-semibold rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\",children:\"Save Changes\"})})]})]})})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}