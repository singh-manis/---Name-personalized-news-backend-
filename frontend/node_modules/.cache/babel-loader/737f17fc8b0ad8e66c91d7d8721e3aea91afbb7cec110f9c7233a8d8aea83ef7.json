{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useCallback } from 'react';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\nexport function useArticles() {\n  _s();\n  const [articles, setArticles] = useState([]);\n  const [nextPage, setNextPage] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const fetchArticles = useCallback(async () => {\n    try {\n      const token = localStorage.getItem('token');\n      setLoading(true);\n      const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/news/feed`, {\n        headers: {\n          'x-auth-token': token\n        }\n      });\n      setArticles(res.data.articles || []);\n      setNextPage(res.data.nextPage || null);\n    } catch (err) {\n      toast.error('Failed to fetch articles');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n  const loadMoreArticles = useCallback(async () => {\n    if (!nextPage) return;\n    setLoadingMore(true);\n    try {\n      const token = localStorage.getItem('token');\n      const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/news/feed?nextPage=${encodeURIComponent(nextPage)}`, {\n        headers: {\n          'x-auth-token': token\n        }\n      });\n      setArticles(prev => [...prev, ...(res.data.articles || [])]);\n      setNextPage(res.data.nextPage || null);\n    } catch (err) {\n      toast.error('Failed to load more articles');\n    } finally {\n      setLoadingMore(false);\n    }\n  }, [nextPage]);\n  return {\n    articles,\n    nextPage,\n    loading,\n    loadingMore,\n    fetchArticles,\n    loadMoreArticles,\n    setArticles,\n    // expose for real-time updates\n    setNextPage\n  };\n}\n_s(useArticles, \"ovVa8QahW1Cn90W7GNgKLEcMQng=\");","map":{"version":3,"names":["useState","useCallback","axios","toast","useArticles","_s","articles","setArticles","nextPage","setNextPage","loading","setLoading","loadingMore","setLoadingMore","fetchArticles","token","localStorage","getItem","res","get","process","env","REACT_APP_API_URL","headers","data","err","error","loadMoreArticles","encodeURIComponent","prev"],"sources":["C:/Users/Manish singh/Desktop/personalized-news/frontend/src/hooks/useArticles.js"],"sourcesContent":["import { useState, useCallback } from 'react';\r\nimport axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\n\r\nexport function useArticles() {\r\n  const [articles, setArticles] = useState([]);\r\n  const [nextPage, setNextPage] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [loadingMore, setLoadingMore] = useState(false);\r\n\r\n  const fetchArticles = useCallback(async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      setLoading(true);\r\n      const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/news/feed`, {\r\n        headers: { 'x-auth-token': token },\r\n      });\r\n      setArticles(res.data.articles || []);\r\n      setNextPage(res.data.nextPage || null);\r\n    } catch (err) {\r\n      toast.error('Failed to fetch articles');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const loadMoreArticles = useCallback(async () => {\r\n    if (!nextPage) return;\r\n    setLoadingMore(true);\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/news/feed?nextPage=${encodeURIComponent(nextPage)}`, {\r\n        headers: { 'x-auth-token': token },\r\n      });\r\n      setArticles(prev => [...prev, ...(res.data.articles || [])]);\r\n      setNextPage(res.data.nextPage || null);\r\n    } catch (err) {\r\n      toast.error('Failed to load more articles');\r\n    } finally {\r\n      setLoadingMore(false);\r\n    }\r\n  }, [nextPage]);\r\n\r\n  return {\r\n    articles,\r\n    nextPage,\r\n    loading,\r\n    loadingMore,\r\n    fetchArticles,\r\n    loadMoreArticles,\r\n    setArticles, // expose for real-time updates\r\n    setNextPage,\r\n  };\r\n} "],"mappings":";AAAA,SAASA,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AAC7C,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,KAAK,QAAQ,gBAAgB;AAEtC,OAAO,SAASC,WAAWA,CAAA,EAAG;EAAAC,EAAA;EAC5B,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACQ,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACU,OAAO,EAAEC,UAAU,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACY,WAAW,EAAEC,cAAc,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EAErD,MAAMc,aAAa,GAAGb,WAAW,CAAC,YAAY;IAC5C,IAAI;MACF,MAAMc,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3CN,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMO,GAAG,GAAG,MAAMhB,KAAK,CAACiB,GAAG,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,gBAAgB,EAAE;QAC5EC,OAAO,EAAE;UAAE,cAAc,EAAER;QAAM;MACnC,CAAC,CAAC;MACFR,WAAW,CAACW,GAAG,CAACM,IAAI,CAAClB,QAAQ,IAAI,EAAE,CAAC;MACpCG,WAAW,CAACS,GAAG,CAACM,IAAI,CAAChB,QAAQ,IAAI,IAAI,CAAC;IACxC,CAAC,CAAC,OAAOiB,GAAG,EAAE;MACZtB,KAAK,CAACuB,KAAK,CAAC,0BAA0B,CAAC;IACzC,CAAC,SAAS;MACRf,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMgB,gBAAgB,GAAG1B,WAAW,CAAC,YAAY;IAC/C,IAAI,CAACO,QAAQ,EAAE;IACfK,cAAc,CAAC,IAAI,CAAC;IACpB,IAAI;MACF,MAAME,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,MAAMC,GAAG,GAAG,MAAMhB,KAAK,CAACiB,GAAG,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,2BAA2BM,kBAAkB,CAACpB,QAAQ,CAAC,EAAE,EAAE;QACrHe,OAAO,EAAE;UAAE,cAAc,EAAER;QAAM;MACnC,CAAC,CAAC;MACFR,WAAW,CAACsB,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE,IAAIX,GAAG,CAACM,IAAI,CAAClB,QAAQ,IAAI,EAAE,CAAC,CAAC,CAAC;MAC5DG,WAAW,CAACS,GAAG,CAACM,IAAI,CAAChB,QAAQ,IAAI,IAAI,CAAC;IACxC,CAAC,CAAC,OAAOiB,GAAG,EAAE;MACZtB,KAAK,CAACuB,KAAK,CAAC,8BAA8B,CAAC;IAC7C,CAAC,SAAS;MACRb,cAAc,CAAC,KAAK,CAAC;IACvB;EACF,CAAC,EAAE,CAACL,QAAQ,CAAC,CAAC;EAEd,OAAO;IACLF,QAAQ;IACRE,QAAQ;IACRE,OAAO;IACPE,WAAW;IACXE,aAAa;IACba,gBAAgB;IAChBpB,WAAW;IAAE;IACbE;EACF,CAAC;AACH;AAACJ,EAAA,CAjDeD,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}