"use strict";(self.webpackChunkpersonalized_news_frontend=self.webpackChunkpersonalized_news_frontend||[]).push([[640],{640:(e,t,s)=>{s.r(t),s.d(t,{default:()=>y});var a=s(9379),r=s(9950),o=s(6910),n=s(9348),l=s(3986);const i=["title","titleId"];function d(e,t){let{title:s,titleId:a}=e,o=(0,l.A)(e,i);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},o),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const c=r.forwardRef(d),m=["title","titleId"];function h(e,t){let{title:s,titleId:a}=e,o=(0,l.A)(e,m);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},o),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const u=r.forwardRef(h),x=["title","titleId"];function p(e,t){let{title:s,titleId:a}=e,o=(0,l.A)(e,x);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},o),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const b=r.forwardRef(p);var g=s(7818),w=(s(2171),s(4414));function y(){const[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[i,d]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null),[x,p]=(0,r.useState)({topic:"",notes:""}),{t:y}=(0,g.Bd)();(0,r.useEffect)(()=>{f()},[]);const f=async()=>{try{const e=localStorage.getItem("token"),s=await o.A.get("".concat("http://localhost:5000","/api/user/knowledge-base"),{headers:{"x-auth-token":e}});t(s.data),l(!1)}catch(e){n.oR.error("Failed to fetch knowledge base"),l(!1)}};return s?(0,w.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,w.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,w.jsx)("div",{className:"modern-bg min-h-screen py-8",children:(0,w.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,w.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,w.jsx)("h1",{className:"text-3xl font-extrabold text-primary-700 tracking-tight drop-shadow",children:y("Knowledge Base")}),(0,w.jsxs)("button",{onClick:()=>{d(!0),p({topic:"",notes:""}),h(null)},className:"inline-flex items-center px-5 py-2 border border-transparent text-base font-semibold rounded-lg text-white bg-primary-600 hover:bg-primary-700 shadow transition",children:[(0,w.jsx)(c,{className:"h-5 w-5 mr-2"}),y("Add Entry")]})]}),i&&(0,w.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 mb-8 border border-gray-100",children:[(0,w.jsx)("h2",{className:"text-xl font-bold text-primary-700 mb-4",children:y(m?"Edit Entry":"Add New Entry")}),(0,w.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=localStorage.getItem("token");m?(await o.A.put("".concat("http://localhost:5000","/api/user/knowledge-base/").concat(m),x,{headers:{"x-auth-token":e}}),n.oR.success("Knowledge base entry updated")):(await o.A.post("".concat("http://localhost:5000","/api/user/knowledge-base"),x,{headers:{"x-auth-token":e}}),n.oR.success("New entry added to knowledge base")),p({topic:"",notes:""}),d(!1),h(null),f()}catch(t){n.oR.error("Failed to save knowledge base entry")}},className:"space-y-6",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"topic",className:"block text-sm font-medium text-gray-700",children:y("Topic")}),(0,w.jsx)("input",{type:"text",id:"topic",name:"topic",value:x.topic,onChange:e=>p((0,a.A)((0,a.A)({},x),{},{topic:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:!0})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:y("Notes")}),(0,w.jsx)("textarea",{id:"notes",name:"notes",rows:4,value:x.notes,onChange:e=>p((0,a.A)((0,a.A)({},x),{},{notes:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:!0})]}),(0,w.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,w.jsx)("button",{type:"button",onClick:()=>{d(!1),h(null),p({topic:"",notes:""})},className:"px-5 py-2 border border-gray-300 rounded-lg text-base font-semibold text-gray-700 hover:bg-gray-50 shadow",children:y("Cancel")}),(0,w.jsx)("button",{type:"submit",className:"px-5 py-2 border border-transparent rounded-lg shadow text-base font-semibold text-white bg-primary-600 hover:bg-primary-700",children:y(m?"Update":"Save")})]})]})]}),(0,w.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,w.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-100",children:(0,w.jsxs)("div",{className:"p-6",children:[(0,w.jsxs)("div",{className:"flex justify-between items-start",children:[(0,w.jsx)("h3",{className:"text-lg font-bold text-primary-700",children:e.topic}),(0,w.jsxs)("div",{className:"flex space-x-2",children:[(0,w.jsx)("button",{onClick:()=>(e=>{p({topic:e.topic,notes:e.notes}),h(e._id),d(!0)})(e),className:"text-gray-400 hover:text-primary-600",children:(0,w.jsx)(u,{className:"h-5 w-5"})}),(0,w.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this entry?"))try{const t=localStorage.getItem("token");await o.A.delete("".concat("http://localhost:5000","/api/user/knowledge-base/").concat(e),{headers:{"x-auth-token":t}}),n.oR.success("Entry deleted successfully"),f()}catch(t){n.oR.error("Failed to delete entry")}})(e._id),className:"text-gray-400 hover:text-red-600",children:(0,w.jsx)(b,{className:"h-5 w-5"})})]})]}),(0,w.jsx)("p",{className:"mt-2 text-gray-700 whitespace-pre-line",children:e.notes})]})},e._id))})]})})}},2171:()=>{}}]);