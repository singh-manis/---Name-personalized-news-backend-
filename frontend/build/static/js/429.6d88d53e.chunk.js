"use strict";(self.webpackChunkpersonalized_news_frontend=self.webpackChunkpersonalized_news_frontend||[]).push([[429],{342:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var r=a(9379),s=a(9950),l=a(8429),n=a(2074),i=a(6910),o=a(9348),d=a(2623),c=a(5536),x=a(2406),m=a(9961),h=a(5215),u=a(3422),g=a(7698),p=(a(4434),a(7818)),b=(a(2171),a(4414));const f=s.memo(e=>{let{article:t,onSave:a,onLike:r,isLiked:s}=e;const i=(0,l.Zp)(),{t:o}=(0,p.Bd)(),d=(t.url||t.link,()=>{t._id?i("/article/".concat(t._id)):i("/external-article",{state:{article:t}})});return(0,b.jsx)("div",{className:"relative group bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 rounded-3xl shadow-2xl border border-blue-100 dark:border-gray-800 overflow-hidden transition-transform duration-300 hover:-translate-y-1 hover:shadow-3xl hover:border-blue-400",style:{borderLeft:"8px solid #6366f1"},children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,b.jsx)("div",{className:"flex-shrink-0 w-full md:w-56 h-48 md:h-auto bg-gradient-to-br from-blue-100 to-purple-100 flex items-center justify-center",children:(()=>{const e=t.image_url||t.imageUrl||t.urlToImage;return e?(0,b.jsx)("img",{src:e,alt:t.title,className:"w-full h-full object-cover rounded-t-3xl md:rounded-l-3xl md:rounded-t-none",onClick:d}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-5xl text-gray-300",children:(0,b.jsx)("span",{role:"img","aria-label":"news",children:"\ud83d\udcf0"})})})()}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("span",{className:"inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium bg-primary-100 text-primary-800",children:t.category}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("button",{onClick:e=>{e.stopPropagation(),r(t)},className:"text-sm flex items-center gap-1 ".concat(s?"text-red-500":"text-gray-400"," hover:text-red-600"),title:s?"Unlike":"Like",children:[(0,b.jsx)(m.A,{className:"h-5 w-5"}),s?t.likes.length:0]}),(0,b.jsx)("button",{onClick:e=>{e.stopPropagation(),a(t)},className:"text-gray-400 hover:text-primary-600",children:(0,b.jsx)(h.A,{className:"h-6 w-6"})})]})]}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:t._id?(0,b.jsx)(n.N_,{to:"/article/".concat(t._id),className:"hover:text-primary-600",children:t.title}):(0,b.jsx)(n.N_,{to:"/external-article",state:{article:t},className:"hover:text-primary-600",children:t.title})}),(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:t.summary}),(0,b.jsx)("span",{className:"text-sm text-gray-500",children:new Date(t.publishedAt).toLocaleDateString()})]})]})})});f.displayName="ArticleCard";const y=f;var k=a(9573),j=a(9838);const v=e=>{let{briefingLoading:t,dailyBriefing:a,fetchDailyBriefing:r,t:s}=e;return(0,b.jsxs)("div",{className:"bg-white/60 backdrop-blur-md border border-white/40 shadow-lg rounded-xl dark:bg-slate-800 dark:backdrop-blur-none dark:border-slate-700 dark:shadow dark:rounded-lg p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 flex items-center",children:[(0,b.jsx)(k.A,{className:"w-6 h-6 mr-2"}),s("ai_assistant")]}),(0,b.jsx)("button",{onClick:r,disabled:t,className:"text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 transition","aria-label":"Refresh Briefing",children:(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5 ".concat(t?"animate-spin":""),children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.664 0l3.18-3.185m-3.18 3.182v4.992"})})})]}),(0,b.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-200 prose prose-sm max-w-none prose-p:my-1 prose-headings:text-gray-700 dark:prose-headings:text-gray-300",children:t?(0,b.jsx)("p",{children:s("loading_briefing")}):(0,b.jsx)(j.oz,{children:a})})]})},w=e=>{let{trending:t,t:a,showAllTrending:r,setShowAllTrending:s}=e;return(0,b.jsxs)("div",{className:"bg-white/60 backdrop-blur-md border border-white/40 shadow-lg rounded-xl dark:bg-slate-800 dark:backdrop-blur-none dark:border-slate-700 dark:shadow dark:rounded-lg p-6 mt-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h3",{className:"text-lg font-bold text-gray-800 dark:text-gray-100 flex items-center",children:[(0,b.jsx)(d.A,{className:"w-6 h-6 mr-2 text-red-500"}),a("Trending")]}),(0,b.jsx)("button",{onClick:()=>s(e=>!e),className:"text-primary-600 dark:text-primary-400 hover:underline text-sm font-semibold",children:a(r?"Show Less":"See All Trending")})]}),(0,b.jsx)("div",{className:"flex overflow-x-auto gap-4 pb-2 hide-scrollbar",children:(r?t:t.slice(0,5)).map((e,t)=>{var a,r;return(0,b.jsxs)("div",{className:"min-w-[320px] max-w-xs bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 rounded-xl shadow-md border border-blue-100 dark:border-gray-800 flex-shrink-0 hover:shadow-lg transition-shadow duration-200 cursor-pointer",tabIndex:0,"aria-label":e.title,children:[(()=>{const t=e.image_url||e.imageUrl||e.urlToImage;return t?(0,b.jsx)("img",{src:t,alt:e.title,className:"w-full h-32 object-cover rounded-t-xl"}):(0,b.jsx)("div",{className:"w-full h-32 flex items-center justify-center text-4xl text-gray-300",children:"\ud83d\udcf0"})})(),(0,b.jsxs)("div",{className:"p-4 flex flex-col gap-2",children:[(0,b.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow",children:e.category||(null===(a=e.source)||void 0===a?void 0:a.name)||"Trending"}),(0,b.jsx)("h3",{className:"text-base font-bold text-gray-900 dark:text-white line-clamp-2 mb-1",children:e.title}),(0,b.jsx)("span",{className:"text-xs text-gray-400 dark:text-gray-300",children:e.publishedAt?new Date(e.publishedAt).toLocaleDateString():""}),(null===(r=e.source)||void 0===r?void 0:r.name)&&(0,b.jsx)("span",{className:"text-xs text-blue-700 dark:text-blue-300 font-semibold",children:e.source.name}),(0,b.jsx)("a",{href:e.url||e.link,target:"_blank",rel:"noopener noreferrer",className:"mt-2 text-xs text-primary-600 dark:text-primary-300 hover:underline font-semibold",children:"Read"})]})]},e._id||e.url||e.link||t)})})]})};var N=a(8361);function S(){var e,t;const{articles:a,nextPage:f,loading:k,loadingMore:j,fetchArticles:S,loadMoreArticles:A,setArticles:_,setNextPage:C}=function(){const[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)(null),[l,n]=(0,s.useState)(!0),[d,c]=(0,s.useState)(!1),x=(0,s.useCallback)(async()=>{try{const e=localStorage.getItem("token");n(!0);const a=await i.A.get("".concat("http://localhost:5000","/api/news/feed"),{headers:{"x-auth-token":e}});t(a.data.articles||[]),r(a.data.nextPage||null)}catch(e){o.oR.error("Failed to fetch articles")}finally{n(!1)}},[]),m=(0,s.useCallback)(async()=>{if(a){c(!0);try{const e=localStorage.getItem("token"),s=await i.A.get("".concat("http://localhost:5000","/api/news/feed?nextPage=").concat(encodeURIComponent(a)),{headers:{"x-auth-token":e}});t(e=>[...e,...s.data.articles||[]]),r(s.data.nextPage||null)}catch(e){o.oR.error("Failed to load more articles")}finally{c(!1)}}},[a]);return{articles:e,nextPage:a,loading:l,loadingMore:d,fetchArticles:x,loadMoreArticles:m,setArticles:t,setNextPage:r}}(),[T,L]=(0,s.useState)(null),[I,D]=(0,s.useState)(""),[R,P]=(0,s.useState)(""),[M,F]=(0,s.useState)(!1),[U,B]=(0,s.useState)(""),[z,E]=(0,s.useState)(!0),[O,W]=(0,s.useState)(""),[Y,G]=(0,s.useState)(null),[V,q]=(0,s.useState)(""),[H,Z]=(0,s.useState)(!1),[J,K]=(0,s.useState)([]),[Q,X]=(0,s.useState)(null),[$,ee]=(0,s.useState)(""),[te,ae]=(0,s.useState)(""),[re,se]=(0,s.useState)(null),[le,ne]=(0,s.useState)(null),{t:ie}=(0,p.Bd)(),[oe,de]=(0,s.useState)([]),[ce,xe]=(0,s.useState)(null),[me,he]=((0,l.Zp)(),(0,s.useState)(!1)),[ue,ge]=(0,s.useState)(null),[pe,be]=(0,s.useState)(!1),fe=(0,s.useRef)(),ye=(0,s.useCallback)(e=>{j||(fe.current&&fe.current.disconnect(),fe.current=new window.IntersectionObserver(e=>{e[0].isIntersecting&&f&&A()}),e&&fe.current.observe(e))},[j,f]),{trending:ke,loadingTrending:je,fetchTrending:ve,setTrending:we}=function(){const[e,t]=(0,s.useState)([]),[a,r]=(0,s.useState)(!0);return{trending:e,loadingTrending:a,fetchTrending:(0,s.useCallback)(async()=>{try{r(!0);const e=localStorage.getItem("token"),a=await i.A.get("".concat("http://localhost:5000","/api/news/trending"),{headers:{"x-auth-token":e}});t(a.data)}catch(e){o.oR.error("Failed to fetch trending articles")}finally{r(!1)}},[]),setTrending:t}}();(0,s.useEffect)(()=>{S();(async()=>{try{const e=localStorage.getItem("token"),t=await i.A.get("".concat("http://localhost:5000","/api/user/profile"),{headers:{"x-auth-token":e}});de(t.data.externalLikes||[]),xe(t.data)}catch(e){}})()},[]),(0,s.useEffect)(()=>{const e=(0,u.io)("http://localhost:5000");return e.on("new-article",e=>{_(t=>[e,...t])}),()=>{e.disconnect()}},[]),(0,s.useEffect)(()=>{(async()=>{const e=localStorage.getItem("token"),t=await i.A.get("".concat("http://localhost:5000","/api/user/notifications"),{headers:{"x-auth-token":e}});K(t.data)})()},[]),(0,s.useEffect)(()=>{const e=localStorage.getItem("token");if(e)try{const t=JSON.parse(atob(e.split(".")[1]));X(t.id||t.sub||null)}catch(t){X(null)}},[]),(0,s.useEffect)(()=>{(async()=>{try{const e=localStorage.getItem("token"),t=await i.A.get("".concat("http://localhost:5000","/api/news/trending"),{headers:{"x-auth-token":e}});we(t.data)}catch(e){}})(),Ne()},[]);const Ne=async()=>{E(!0);try{const e=localStorage.getItem("token"),t=await i.A.get("".concat("http://localhost:5000","/api/ai/daily-briefing"),{headers:{"x-auth-token":e}});B(t.data.briefing)}catch(e){B("Failed to load the daily briefing. Please try again later.")}finally{E(!1)}},Se=async e=>{try{const t=localStorage.getItem("token");if(e._id)await i.A.post("".concat("http://localhost:5000","/api/news/article/").concat(e._id,"/save"),{},{headers:{"x-auth-token":t}}),o.oR.success("Article saved successfully");else{const a=e.url||e.link;if(console.log("Sending bookmark for external article with url:",a),!a||"string"!==typeof a||!a.startsWith("http"))return void o.oR.error("No valid URL for this article.");await i.A.post("".concat("http://localhost:5000","/api/news/external/bookmark"),{url:a},{headers:{"x-auth-token":t}}),o.oR.success("Bookmarked!")}}catch(t){o.oR.error("Failed to save article")}},Ae=async e=>{try{const t=localStorage.getItem("token");if(e._id){const a=await i.A.post("".concat("http://localhost:5000","/api/news/article/").concat(e._id,"/like"),{},{headers:{"x-auth-token":t}});_(t=>t.map(t=>t._id===e._id?(0,r.A)((0,r.A)({},t),{},{likes:a.data.likes}):t)),Y&&G(t=>t.map(t=>t._id===e._id?(0,r.A)((0,r.A)({},t),{},{likes:a.data.likes}):t))}else{const a=e.url||e.link;if(console.log("Sending like for external article with url:",a),!a||"string"!==typeof a||!a.startsWith("http"))return void o.oR.error("No valid URL for this article.");oe.includes(a)?(await i.A.delete("".concat("http://localhost:5000","/api/news/external/like"),{data:{url:a},headers:{"x-auth-token":t}}),de(e=>e.filter(e=>e!==a))):(await i.A.post("".concat("http://localhost:5000","/api/news/external/like"),{url:a},{headers:{"x-auth-token":t}}),de(e=>[...e,a]))}}catch(t){o.oR.error("Failed to like article")}};const _e=e=>{navigator.clipboard&&e&&(navigator.clipboard.writeText(e),o.oR.success("Link copied!"))};return k?(0,b.jsx)("div",{className:"modern-bg min-h-screen py-8",children:(0,b.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"mb-2 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-xl font-bold text-white",children:"M"}),(0,b.jsx)("div",{children:(0,b.jsxs)("span",{className:"text-base font-medium text-gray-400 dark:text-gray-300",children:["Good morning, ",(0,b.jsx)("span",{className:"font-bold text-primary-600 dark:text-primary-300",children:"Manish kumar!"})]})})]}),(0,b.jsxs)("div",{className:"bg-white/60 backdrop-blur-md border border-white/40 shadow-lg rounded-xl dark:bg-slate-800 dark:backdrop-blur-none dark:border-slate-700 dark:shadow dark:rounded-lg p-10 mb-10",children:[(0,b.jsx)("h1",{className:"text-3xl font-extrabold text-primary-700 dark:text-primary-200 mb-8 tracking-tight drop-shadow",children:ie("Your Personalized News Feed")}),(0,b.jsx)(N.qw,{}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"lg:col-span-2",children:[(0,b.jsx)("h2",{className:"text-3xl font-extrabold text-primary-700 mb-6 tracking-tight drop-shadow",children:ie("Your Personalized Feed")}),(0,b.jsx)("div",{className:"space-y-8",children:[1,2,3].map(e=>(0,b.jsx)(N.O2,{},e))})]}),(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsx)("div",{className:"sticky top-24",children:(0,b.jsxs)("div",{className:"bg-white/60 backdrop-blur-md border border-white/40 shadow-lg rounded-xl dark:bg-slate-800 dark:backdrop-blur-none dark:border-slate-700 dark:shadow dark:rounded-lg p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("div",{className:"h-6 w-32 bg-gray-200 dark:bg-gray-700 rounded"}),(0,b.jsx)("div",{className:"h-5 w-5 bg-gray-200 dark:bg-gray-700 rounded"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-5/6"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-4/6"})]})]})})})]})]})]})})}):(0,b.jsx)("div",{className:"modern-bg min-h-screen py-8",children:(0,b.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"mb-2 flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-xl font-bold text-white",children:"M"}),(0,b.jsx)("div",{children:(0,b.jsxs)("span",{className:"text-base font-medium text-gray-400 dark:text-gray-300",children:["Good morning, ",(0,b.jsx)("span",{className:"font-bold text-primary-600 dark:text-primary-300",children:"Manish kumar!"})]})})]}),(0,b.jsxs)("div",{className:"bg-white/60 backdrop-blur-md border border-white/40 shadow-lg rounded-xl dark:bg-slate-800 dark:backdrop-blur-none dark:border-slate-700 dark:shadow dark:rounded-lg p-10 mb-10",children:[(0,b.jsx)("h1",{className:"text-3xl font-extrabold text-primary-700 dark:text-primary-200 mb-8 tracking-tight drop-shadow",children:ie("Your Personalized News Feed")}),(0,b.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),O.trim()){Z(!0);try{const e=localStorage.getItem("token"),t=new URLSearchParams({q:O});$&&t.append("category",$),te&&t.append("mediaType",te),re&&t.append("startDate",re.toISOString()),le&&t.append("endDate",le.toISOString());const a=await i.A.get("".concat("http://localhost:5000","/api/news/search?").concat(t.toString()),{headers:{"x-auth-token":e}});G(a.data.articles),q(a.data.summary)}catch(t){o.oR.error("Failed to search")}finally{Z(!1)}}},className:"mb-6 flex flex-col md:flex-row md:items-end gap-3 w-full",children:[(0,b.jsx)("input",{value:O,onChange:e=>W(e.target.value),placeholder:ie("Search news..."),className:"h-10 rounded-md border border-gray-300 dark:border-gray-700 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 flex-1 dark:bg-gray-800 dark:text-white"}),(0,b.jsxs)("select",{value:$,onChange:e=>ee(e.target.value),className:"h-10 rounded-md border border-gray-300 dark:border-gray-700 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 flex-1 dark:bg-gray-800 dark:text-white",children:[(0,b.jsx)("option",{value:"",children:ie("All Categories")}),(0,b.jsx)("option",{value:"technology",children:ie("Technology")}),(0,b.jsx)("option",{value:"science",children:ie("Science")}),(0,b.jsx)("option",{value:"business",children:ie("Business")}),(0,b.jsx)("option",{value:"health",children:ie("Health")}),(0,b.jsx)("option",{value:"entertainment",children:ie("Entertainment")}),(0,b.jsx)("option",{value:"sports",children:ie("Sports")}),(0,b.jsx)("option",{value:"politics",children:ie("Politics")}),(0,b.jsx)("option",{value:"education",children:ie("Education")})]}),(0,b.jsxs)("select",{value:te,onChange:e=>ae(e.target.value),className:"h-10 rounded-md border border-gray-300 dark:border-gray-700 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 flex-1 dark:bg-gray-800 dark:text-white",children:[(0,b.jsx)("option",{value:"",children:ie("All Media")}),(0,b.jsx)("option",{value:"text",children:ie("Text")}),(0,b.jsx)("option",{value:"image",children:ie("Image")}),(0,b.jsx)("option",{value:"video",children:ie("Video")}),(0,b.jsx)("option",{value:"podcast",children:ie("Podcast")})]}),(0,b.jsx)(g.Ay,{selected:re,onChange:e=>se(e),selectsStart:!0,startDate:re,endDate:le,placeholderText:ie("Start Date"),className:"h-10 rounded-md border border-gray-300 dark:border-gray-700 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 flex-1 text-sm dark:bg-gray-800 dark:text-white",dateFormat:"yyyy-MM-dd",isClearable:!0}),(0,b.jsx)(g.Ay,{selected:le,onChange:e=>ne(e),selectsEnd:!0,startDate:re,endDate:le,minDate:re,placeholderText:ie("End Date"),className:"h-10 rounded-md border border-gray-300 dark:border-gray-700 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 flex-1 text-sm dark:bg-gray-800 dark:text-white",dateFormat:"yyyy-MM-dd",isClearable:!0}),(0,b.jsx)("button",{type:"submit",className:"h-10 px-6 rounded-md bg-primary-600 text-white font-medium hover:bg-primary-700 dark:bg-primary-700 dark:hover:bg-primary-800 whitespace-nowrap flex-shrink-0",disabled:H,children:ie(H?"Searching...":"Search")})]}),(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-primary-700 dark:text-primary-200 flex items-center",children:[(0,b.jsx)(d.A,{className:"h-6 w-6 mr-2 text-orange-500"})," ",ie("Trending")]}),(0,b.jsx)("button",{className:"text-primary-600 dark:text-primary-300 font-semibold hover:underline text-sm px-3 py-1 rounded focus:outline-none",onClick:()=>{be(!0),he(!0)},children:ie("See All Trending")})]}),0===ke.length?(0,b.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:ie("No trending topics right now.")}):(0,b.jsx)(w,{trending:ke,t:ie,showAllTrending:pe,setShowAllTrending:be})]}),me&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex justify-end bg-black bg-opacity-30",onClick:()=>he(!1),children:(0,b.jsxs)("div",{className:"w-full max-w-md h-full bg-white shadow-2xl p-6 overflow-y-auto relative animate-slide-in-right",onClick:e=>e.stopPropagation(),tabIndex:-1,"aria-modal":"true",role:"dialog",children:[(0,b.jsx)("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-primary-600 focus:outline-none",onClick:()=>he(!1),"aria-label":"Close",children:(0,b.jsx)(c.A,{className:"h-7 w-7"})}),pe?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-primary-700 mb-6",children:ie("All Trending Articles")}),(0,b.jsx)("div",{className:"space-y-6",children:ke.map((e,t)=>{var a,r;return(0,b.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl shadow-md border border-blue-100 p-4 mb-2",children:(0,b.jsxs)("div",{className:"flex gap-4",children:[(()=>{const t=e.image_url||e.imageUrl||e.urlToImage;return t?(0,b.jsx)("img",{src:t,alt:e.title,className:"w-24 h-24 object-cover rounded-lg"}):(0,b.jsx)("div",{className:"w-24 h-24 flex items-center justify-center text-4xl text-gray-300 bg-gray-100 rounded-lg",children:"\ud83d\udcf0"})})(),(0,b.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,b.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow mb-2",children:e.category||(null===(a=e.source)||void 0===a?void 0:a.name)||"Trending"}),(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:e.title}),(0,b.jsx)("span",{className:"text-xs text-gray-400 mb-1",children:e.publishedAt?new Date(e.publishedAt).toLocaleDateString():""}),(null===(r=e.source)||void 0===r?void 0:r.name)&&(0,b.jsx)("span",{className:"text-xs text-blue-700 font-semibold mb-1",children:e.source.name}),(0,b.jsxs)("div",{className:"flex gap-2 mt-auto",children:[(0,b.jsx)("a",{href:e.url||e.link,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary-600 hover:underline font-semibold",children:"Read"}),(0,b.jsxs)("button",{onClick:()=>_e(e.url||e.link),className:"text-xs text-gray-500 hover:text-primary-600 flex items-center gap-1",children:[(0,b.jsx)(x.A,{className:"h-4 w-4"}),"Share"]})]})]})]})},e._id||e.url||e.link||t)})})]}):ue&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(()=>{const e=ue.image_url||ue.imageUrl||ue.urlToImage;return e?(0,b.jsx)("img",{src:e,alt:ue.title,className:"w-full h-48 object-cover rounded-xl mb-4"}):(0,b.jsx)("div",{className:"w-full h-48 flex items-center justify-center text-6xl text-gray-300 mb-4",children:"\ud83d\udcf0"})})(),(0,b.jsx)("span",{className:"inline-flex items-center px-3 py-0.5 rounded-full text-xs font-semibold bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow mb-2",children:ue.category||(null===(e=ue.source)||void 0===e?void 0:e.name)||"Trending"}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2 text-center",children:ue.title}),(0,b.jsx)("span",{className:"text-xs text-gray-400 mb-1",children:ue.publishedAt?new Date(ue.publishedAt).toLocaleDateString():""}),(null===(t=ue.source)||void 0===t?void 0:t.name)&&(0,b.jsx)("span",{className:"text-xs text-blue-700 font-semibold mb-1",children:ue.source.name}),(0,b.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,b.jsx)("a",{href:ue.url||ue.link,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary-600 hover:underline font-semibold",children:"Read"}),(0,b.jsxs)("button",{onClick:()=>_e(ue.url||ue.link),className:"text-xs text-gray-500 hover:text-primary-600 flex items-center gap-1",children:[(0,b.jsx)(x.A,{className:"h-4 w-4"}),"Share"]})]})]}),(0,b.jsx)("div",{className:"text-gray-700 text-base mb-4 whitespace-pre-line",children:ue.description||ue.summary||""})]})]})}),Y?(0,b.jsxs)("div",{className:"bg-white/60 backdrop-blur-md border border-white/40 shadow-lg rounded-xl dark:bg-slate-800 dark:backdrop-blur-none dark:border-slate-700 dark:shadow dark:rounded-lg p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Search Results"}),(0,b.jsx)("button",{onClick:()=>{G(null),q(""),W("")},className:"text-sm font-semibold text-primary-600 dark:text-primary-400 hover:underline",children:"Back to Feed"})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:V}),(0,b.jsx)("div",{className:"space-y-4",children:Y.map((e,t)=>(0,b.jsx)(y,{article:e,onSave:Se,onLike:Ae,isLiked:oe.includes(e.link)},e.article_id||e._id||t))})]}):(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"lg:col-span-2",children:[(0,b.jsx)("h2",{className:"text-3xl font-extrabold text-primary-700 mb-6 tracking-tight drop-shadow",children:ie("Your Personalized Feed")}),(0,b.jsx)("div",{className:"space-y-8",children:a.map((e,t)=>{var r,s;const l=t===a.length-1;return(0,b.jsx)("div",{ref:l?ye:void 0,className:"relative group bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-900 rounded-3xl shadow-2xl border border-blue-100 dark:border-gray-800 overflow-hidden transition-transform duration-300 hover:-translate-y-1 hover:shadow-3xl hover:border-blue-400",style:{borderLeft:"8px solid #6366f1"},children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row",children:[(0,b.jsx)("div",{className:"flex-shrink-0 w-full md:w-56 h-48 md:h-auto bg-gradient-to-br from-blue-100 to-purple-100 flex items-center justify-center",children:(()=>{const t=e.image_url||e.imageUrl||e.urlToImage;return t?(0,b.jsx)("img",{src:t,alt:e.title,className:"w-full h-full object-cover rounded-t-3xl md:rounded-l-3xl md:rounded-t-none"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-5xl text-gray-300",children:(0,b.jsx)("span",{role:"img","aria-label":"news",children:"\ud83d\udcf0"})})})()}),(0,b.jsxs)("div",{className:"flex-1 p-6 flex flex-col justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow",children:e.category||(null===(r=e.source)||void 0===r?void 0:r.name)||"General"}),e.videoUrl&&(0,b.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-pink-100 text-pink-700",children:[(0,b.jsx)("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M4 6v12a2 2 0 002 2h8a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2z"})}),"Video"]}),e.podcastUrl&&(0,b.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:[(0,b.jsxs)("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,b.jsx)("path",{d:"M19.4 15A7.963 7.963 0 0020 12c0-4.418-3.582-8-8-8S4 7.582 4 12c0 1.042.2 2.04.56 2.95"})]}),"Podcast"]})]}),(0,b.jsx)("h3",{className:"text-2xl font-extrabold text-gray-900 dark:text-white mb-2 group-hover:text-primary-700 transition-colors duration-200",children:e._id?(0,b.jsx)(n.N_,{to:"/article/".concat(e._id),children:e.title}):(0,b.jsx)(n.N_,{to:"/external-article",state:{article:e},children:e.title})}),(0,b.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-4 text-lg leading-relaxed line-clamp-3",children:e.summary||e.description})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(null===(s=e.source)||void 0===s?void 0:s.name)&&(0,b.jsx)("span",{className:"font-semibold text-blue-700 dark:text-blue-300",children:e.source.name}),(0,b.jsx)("span",{children:e.publishedAt?new Date(e.publishedAt).toLocaleDateString():""})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("a",{href:e.url||e.link||"/article/".concat(e._id),target:"_blank",rel:"noopener noreferrer",className:"px-3 py-1 rounded-full bg-primary-600 text-white text-xs font-semibold shadow hover:bg-primary-700 dark:bg-primary-700 dark:hover:bg-primary-800 transition",children:"Read"}),(0,b.jsxs)("button",{onClick:()=>Ae(e),className:"text-sm flex items-center gap-1 ".concat(e._id?Q&&e.likes&&e.likes.includes(Q)?"text-red-500":"text-gray-400":oe.includes(e.url)?"text-red-500":"text-gray-400"," hover:text-red-600"),title:e._id?Q&&e.likes&&e.likes.includes(Q)?"Unlike":"Like":oe.includes(e.url)?"Unlike":"Like",children:[(0,b.jsx)(m.A,{className:"h-5 w-5"}),e._id?e.likes?e.likes.length:0:""]}),(0,b.jsx)("button",{onClick:()=>Se(e),className:"text-gray-400 hover:text-primary-600",children:(0,b.jsx)(h.A,{className:"h-6 w-6"})})]})]})]})]})},e._id||e.url||e.link||t)})}),j&&(0,b.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,b.jsx)(N.kt,{size:"lg"})}),!j&&null===f&&a.length>0&&(0,b.jsx)("div",{className:"flex justify-center items-center py-8 fade-in",children:(0,b.jsxs)("div",{className:"bg-gradient-to-r from-blue-100 to-purple-100 text-primary-700 rounded-full px-6 py-2 shadow font-semibold text-lg border border-blue-200",children:["\ud83c\udf89 ",ie("You have reached the end of your feed!")]})})]}),(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsx)("div",{className:"sticky top-24",children:(0,b.jsx)(v,{briefingLoading:z,dailyBriefing:U,fetchDailyBriefing:Ne,t:ie})})})]})]})]})})})}},2171:()=>{}}]);