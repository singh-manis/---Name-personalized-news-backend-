"use strict";(self.webpackChunkpersonalized_news_frontend=self.webpackChunkpersonalized_news_frontend||[]).push([[469],{2171:()=>{},3469:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var s=a(9950),r=a(6910),l=a(2074),i=a(9348),d=(a(2171),a(4414));function n(){const[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(!0);(0,s.useEffect)(()=>{o()},[]);const o=async()=>{try{const e=localStorage.getItem("token"),a=await r.A.get("".concat("http://localhost:5000","/api/news/all"),{headers:{"x-auth-token":e}});t(a.data||[]),n(!1)}catch(e){i.oR.error("Failed to fetch articles"),n(!1)}};return(0,d.jsx)("div",{className:"modern-bg min-h-screen py-8",children:(0,d.jsx)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,d.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-10 border border-gray-100",children:[(0,d.jsx)("h1",{className:"text-3xl font-extrabold text-primary-700 mb-8 tracking-tight drop-shadow",children:"Admin Dashboard"}),(0,d.jsxs)("div",{className:"mb-6 flex gap-3",children:[(0,d.jsx)(l.N_,{to:"/admin/new",className:"bg-primary-600 text-white px-5 py-2 rounded-lg font-semibold shadow hover:bg-primary-700 transition",children:"Add New Article"}),(0,d.jsx)("button",{onClick:o,className:"bg-gray-200 text-gray-700 px-5 py-2 rounded-lg font-semibold border border-gray-300 shadow hover:bg-gray-300 transition",children:"Refresh"})]}),a?(0,d.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,d.jsx)("thead",{className:"bg-primary-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-4 py-2 text-left text-xs font-bold text-primary-700 uppercase",children:"Title"}),(0,d.jsx)("th",{className:"px-4 py-2 text-left text-xs font-bold text-primary-700 uppercase",children:"Category"}),(0,d.jsx)("th",{className:"px-4 py-2 text-left text-xs font-bold text-primary-700 uppercase",children:"Actions"})]})}),(0,d.jsx)("tbody",{children:e.map(e=>(0,d.jsxs)("tr",{className:"hover:bg-primary-50 transition",children:[(0,d.jsx)("td",{className:"px-4 py-2 font-medium text-gray-900",children:e.title}),(0,d.jsx)("td",{className:"px-4 py-2 text-gray-700",children:e.category}),(0,d.jsxs)("td",{className:"px-4 py-2",children:[(0,d.jsx)(l.N_,{to:"/admin/edit/".concat(e._id),className:"text-blue-600 hover:underline mr-4 font-semibold",children:"Edit"}),(0,d.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this article?"))try{const a=localStorage.getItem("token");await r.A.delete("".concat("http://localhost:5000","/api/news/article/").concat(e),{headers:{"x-auth-token":a}}),t(t=>t.filter(t=>t._id!==e)),i.oR.success("Article deleted")}catch(a){i.oR.error("Failed to delete article")}})(e._id),className:"text-red-600 hover:underline font-semibold",children:"Delete"})]})]},e._id))})]})})]})})})}}}]);