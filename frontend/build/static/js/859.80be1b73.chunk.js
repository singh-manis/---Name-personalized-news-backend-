"use strict";(self.webpackChunkpersonalized_news_frontend=self.webpackChunkpersonalized_news_frontend||[]).push([[859],{2171:()=>{},5859:(e,r,s)=>{s.r(r),s.d(r,{default:()=>d});var a=s(9379),t=s(9950),o=s(6910),l=s(9348),i=(s(2171),s(4414));function d(){const[e,r]=(0,t.useState)(null),[s,d]=(0,t.useState)(!0),[n,c]=(0,t.useState)({name:"",email:"",bio:"",profilePicture:"",interests:[],currentPassword:"",newPassword:"",confirmPassword:""});(0,t.useEffect)(()=>{m()},[]);const m=async()=>{try{const e=localStorage.getItem("token"),s=await o.A.get("".concat("http://localhost:5000","/api/user/profile"),{headers:{"x-auth-token":e}});r(s.data),c((0,a.A)((0,a.A)({},n),{},{name:s.data.name,email:s.data.email,bio:s.data.bio||"",profilePicture:s.data.profilePicture||"",interests:s.data.interests||[]})),d(!1)}catch(e){l.oR.error("Failed to fetch profile"),d(!1)}};return s?(0,i.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,i.jsx)("div",{className:"modern-bg min-h-screen py-8",children:(0,i.jsx)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-10 border border-gray-100",children:[(0,i.jsx)("h1",{className:"text-3xl font-extrabold text-primary-700 mb-8 tracking-tight drop-shadow",children:"Profile Settings"}),n.profilePicture&&(0,i.jsx)("div",{className:"flex justify-center mb-6",children:(0,i.jsx)("img",{src:n.profilePicture,alt:"Profile",className:"w-28 h-28 rounded-full object-cover border-4 border-primary-500 shadow-lg"})}),(0,i.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=localStorage.getItem("token");await o.A.put("".concat("http://localhost:5000","/api/user/profile"),{name:n.name,bio:n.bio,profilePicture:n.profilePicture,interests:n.interests,currentPassword:n.currentPassword,newPassword:n.newPassword},{headers:{"x-auth-token":e}}),l.oR.success("Profile updated successfully"),c((0,a.A)((0,a.A)({},n),{},{currentPassword:"",newPassword:"",confirmPassword:""})),m()}catch(t){var r,s;l.oR.error((null===(r=t.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.msg)||"Failed to update profile")}},className:"space-y-8",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"profilePicture",className:"block text-sm font-medium text-gray-700",children:"Profile Picture URL"}),(0,i.jsx)("input",{type:"text",id:"profilePicture",value:n.profilePicture,onChange:e=>c((0,a.A)((0,a.A)({},n),{},{profilePicture:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",placeholder:"Paste image URL here"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,i.jsx)("input",{type:"text",id:"name",value:n.name,onChange:e=>c((0,a.A)((0,a.A)({},n),{},{name:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700",children:"Bio"}),(0,i.jsx)("textarea",{id:"bio",value:n.bio,onChange:e=>c((0,a.A)((0,a.A)({},n),{},{bio:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",rows:3,placeholder:"Tell us about yourself..."})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Interests"}),(0,i.jsx)("div",{className:"flex flex-wrap gap-2",children:["technology","science","business","health","entertainment","sports","politics","education"].map(e=>(0,i.jsxs)("label",{className:"flex items-center gap-1 text-sm px-3 py-1 rounded-full cursor-pointer font-semibold shadow-sm transition-all ".concat(n.interests.includes(e)?"bg-gradient-to-r from-blue-500 to-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-blue-100"),children:[(0,i.jsx)("input",{type:"checkbox",checked:n.interests.includes(e),onChange:()=>{c(r=>{const s=r.interests.includes(e)?r.interests.filter(r=>r!==e):[...r.interests,e];return(0,a.A)((0,a.A)({},r),{},{interests:s})})},className:"accent-primary-600"}),e.charAt(0).toUpperCase()+e.slice(1)]},e))})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,i.jsx)("input",{type:"email",id:"email",value:n.email,disabled:!0,className:"mt-1 block w-full rounded-md border-gray-300 bg-gray-50 shadow-sm sm:text-sm"})]}),(0,i.jsxs)("div",{className:"border-t border-gray-200 pt-8 mt-8",children:[(0,i.jsx)("h2",{className:"text-xl font-bold text-primary-700 mb-6",children:"Change Password"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"currentPassword",className:"block text-sm font-medium text-gray-700",children:"Current Password"}),(0,i.jsx)("input",{type:"password",id:"currentPassword",value:n.currentPassword,onChange:e=>c((0,a.A)((0,a.A)({},n),{},{currentPassword:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700",children:"New Password"}),(0,i.jsx)("input",{type:"password",id:"newPassword",value:n.newPassword,onChange:e=>c((0,a.A)((0,a.A)({},n),{},{newPassword:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),(0,i.jsx)("input",{type:"password",id:"confirmPassword",value:n.confirmPassword,onChange:e=>c((0,a.A)((0,a.A)({},n),{},{confirmPassword:e.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]})]})]}),(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)("button",{type:"submit",className:"inline-flex justify-center py-2 px-6 border border-transparent shadow-md text-base font-semibold rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Save Changes"})})]})]})})})}}}]);