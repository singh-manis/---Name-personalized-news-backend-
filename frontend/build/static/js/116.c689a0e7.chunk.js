"use strict";(self.webpackChunkpersonalized_news_frontend=self.webpackChunkpersonalized_news_frontend||[]).push([[116],{2171:()=>{},5116:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var r=a(9950),l=a(8429),s=a(6910),n=a(9348),i=a(4185),o=a(9961),c=a(5215),d=a(3986);const m=["title","titleId"];function u(e,t){let{title:a,titleId:l}=e,s=(0,d.A)(e,m);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},s),a?r.createElement("title",{id:l},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const x=r.forwardRef(u),h=["title","titleId"];function p(e,t){let{title:a,titleId:l}=e,s=(0,d.A)(e,h);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},s),a?r.createElement("title",{id:l},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}const g=r.forwardRef(p);var b=a(6460),f=a(9838),y=(a(2171),a(4414));function v(){var e;const{state:t}=(0,l.zy)(),a=null===t||void 0===t?void 0:t.article,d=(0,l.Zp)(),[m,u]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[v,j]=(0,r.useState)(!1),[w,k]=(0,r.useState)(null),[N,A]=(0,r.useState)(!1),[C,S]=(0,r.useState)(""),[I,E]=(0,r.useState)(!1),[L,R]=(0,r.useState)("hi"),[M,F]=(0,r.useState)(!1),[U,B]=(0,r.useState)(!1),[T,Z]=(0,r.useState)([]),[_,D]=(0,r.useState)(""),[W,O]=(0,r.useState)(!1),[z,P]=(0,r.useState)(!1),V=localStorage.getItem("token");if((0,r.useEffect)(()=>{var e;if(!a)return;const t=a.url||a.link;t&&"string"===typeof t&&t.startsWith("http")&&(s.A.post("".concat("http://localhost:5000","/api/user/external-history"),{url:t,title:a.title,imageUrl:a.image_url||a.imageUrl||a.urlToImage,source:null===(e=a.source)||void 0===e?void 0:e.name},{headers:{"x-auth-token":V}}),s.A.get("".concat("http://localhost:5000","/api/user/profile"),{headers:{"x-auth-token":V}}).then(e=>{var a,r;F(null===(a=e.data.externalLikes)||void 0===a?void 0:a.includes(t)),B(null===(r=e.data.externalBookmarks)||void 0===r?void 0:r.includes(t))}),s.A.get("".concat("http://localhost:5000","/api/news/external/comments"),{params:{url:t},headers:{"x-auth-token":V}}).then(e=>Z(e.data)))},[a,z,V]),!a)return(0,y.jsx)("div",{className:"modern-bg min-h-screen flex flex-col items-center justify-center py-12 px-4",children:(0,y.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-10 border border-gray-100 text-center",children:[(0,y.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Article not found"}),(0,y.jsx)("button",{onClick:()=>d(-1),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-base font-semibold rounded-lg text-white bg-primary-600 hover:bg-primary-700",children:"Go Back"})]})});const q=a.publishedAt&&!isNaN(new Date(a.publishedAt))?new Date(a.publishedAt).toLocaleDateString():null,H=a.description||(a.content&&!a.content.includes("[+")?a.content:""),G=a.content&&a.content.includes("[+"),J=a.link||a.url;return(0,y.jsx)("div",{className:"modern-bg min-h-screen py-8",children:(0,y.jsx)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,y.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 sm:p-10 border border-gray-100",children:[(0,y.jsxs)("button",{onClick:()=>d(-1),className:"inline-flex items-center text-gray-600 hover:text-primary-700 mb-6 font-semibold",children:[(0,y.jsx)(i.A,{className:"h-5 w-5 mr-2"}),"Back"]}),(a.image_url||a.imageUrl||a.urlToImage)&&(0,y.jsx)("img",{src:a.image_url||a.imageUrl||a.urlToImage,alt:a.title,className:"w-full h-auto max-h-80 object-cover rounded-xl mb-6 shadow-lg"}),(0,y.jsx)("h1",{className:"text-3xl font-extrabold text-primary-700 mb-4 tracking-tight drop-shadow",children:a.title}),(0,y.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-y-2 mb-6 text-sm",children:[(0,y.jsxs)("div",{className:"flex items-center gap-3",children:[(0,y.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full font-semibold bg-primary-100 text-primary-800",children:(null===(e=a.source)||void 0===e?void 0:e.name)||"External Source"}),q&&(0,y.jsx)("span",{className:"text-gray-500",children:q})]}),(0,y.jsxs)("div",{className:"flex items-center gap-1",children:[(0,y.jsx)("button",{onClick:async()=>{try{M?(await s.A.delete("".concat("http://localhost:5000","/api/news/external/like"),{data:{url:a.url||a.link},headers:{"x-auth-token":V}}),F(!1)):(await s.A.post("".concat("http://localhost:5000","/api/news/external/like"),{url:a.url||a.link},{headers:{"x-auth-token":V}}),F(!0))}catch(e){n.oR.error("Failed to update like")}},className:"p-2 rounded-full ".concat(M?"text-red-500 bg-red-100":"text-gray-400 hover:bg-gray-100"," transition-colors"),title:M?"Unlike":"Like",children:(0,y.jsx)(o.A,{className:"h-6 w-6"})}),(0,y.jsx)("button",{onClick:async()=>{try{U?(await s.A.delete("".concat("http://localhost:5000","/api/news/external/bookmark"),{data:{url:a.url||a.link},headers:{"x-auth-token":V}}),B(!1)):(await s.A.post("".concat("http://localhost:5000","/api/news/external/bookmark"),{url:a.url||a.link},{headers:{"x-auth-token":V}}),B(!0))}catch(e){n.oR.error("Failed to update bookmark")}},className:"p-2 rounded-full ".concat(U?"text-blue-600 bg-blue-100":"text-gray-400 hover:bg-gray-100"," transition-colors"),title:U?"Unbookmark":"Bookmark",children:(0,y.jsx)(c.A,{className:"h-6 w-6"})})]})]}),H&&(0,y.jsx)("div",{className:"prose prose-lg max-w-none text-gray-800 mb-6",children:(0,y.jsx)("p",{children:H})}),G&&(0,y.jsxs)("div",{className:"my-6 p-4 bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 rounded-r-lg",children:[(0,y.jsx)("p",{className:"font-bold",children:"Full content is not available here."}),(0,y.jsx)("p",{className:"text-sm",children:"This is a preview. The complete article is on the original publisher's website."})]}),J&&(0,y.jsx)("div",{className:"my-6",children:(0,y.jsxs)("a",{href:J,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-5 py-3 rounded-lg bg-primary-600 text-white font-bold hover:bg-primary-700 shadow-md hover:shadow-lg transition-all transform hover:-translate-y-0.5",children:[(0,y.jsx)(x,{className:"h-5 w-5"}),"Read Original Article"]})}),(0,y.jsxs)("div",{className:"mt-10 pt-8 border-t border-gray-200",children:[(0,y.jsxs)("div",{className:"mb-8",children:[(0,y.jsxs)("h2",{className:"text-xl font-bold text-primary-700 mb-4 flex items-center gap-2",children:[(0,y.jsx)(g,{className:"h-6 w-6"})," AI Assistant"]}),(0,y.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),m.trim()){j(!0),p("");try{var t,a,r,l,i;const e=await s.A.post("".concat("http://localhost:5000","/api/ai/qa"),{question:m,context:H},{headers:{"x-auth-token":V}});p(e.data.answer||(null===(t=e.data.candidates)||void 0===t||null===(a=t[0])||void 0===a||null===(r=a.content)||void 0===r||null===(l=r.parts)||void 0===l||null===(i=l[0])||void 0===i?void 0:i.text)||"")}catch(o){n.oR.error("AI failed")}finally{j(!1)}}},className:"flex flex-col gap-3 mb-3",children:[(0,y.jsx)("textarea",{className:"rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500 w-full",rows:2,value:m,onChange:e=>u(e.target.value),placeholder:"Ask a question about this article..."}),(0,y.jsx)("button",{type:"submit",className:"px-4 py-2 rounded-md bg-primary-600 text-white font-medium hover:bg-primary-700 w-fit self-start",disabled:v,children:v?"Asking...":"Ask AI"})]}),h&&(0,y.jsx)("div",{className:"prose prose-lg max-w-none bg-blue-50 rounded-lg p-4 text-blue-900 mb-4",children:(0,y.jsx)(f.oz,{children:h})}),(0,y.jsx)("button",{onClick:async()=>{A(!0),k(null);try{const e=await s.A.post("".concat("http://localhost:5000","/api/ai/fact-check"),{content:H},{headers:{"x-auth-token":V}});k(e.data)}catch(e){n.oR.error("Fact-check failed")}finally{A(!1)}},className:"px-4 py-2 rounded-md bg-green-100 text-green-800 font-semibold hover:bg-green-200 flex items-center gap-2",disabled:N,children:N?"Fact-checking...":(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(b.A,{className:"h-5 w-5"})," Fact-Check"]})}),w&&(0,y.jsxs)("div",{className:"mt-4 bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,y.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"Fact-Check Result"}),(0,y.jsxs)("div",{className:"mb-3",children:[(0,y.jsx)("span",{className:"font-semibold text-gray-700",children:"Verdict: "}),(0,y.jsx)("span",{className:"px-2 py-1 text-sm font-bold rounded-full ".concat({Accurate:"bg-green-100 text-green-800","Mostly Accurate":"bg-green-100 text-green-800",Mixed:"bg-yellow-100 text-yellow-800","Mostly Inaccurate":"bg-red-100 text-red-800",Inaccurate:"bg-red-100 text-red-800",Unverifiable:"bg-gray-100 text-gray-800","Parsing Failed":"bg-red-100 text-red-800"}[w.verdict]||"bg-gray-100 text-gray-800"),children:w.verdict})]}),(0,y.jsxs)("p",{className:"text-gray-700 mb-4 italic",children:['"',w.summary,'"']}),w.claims&&w.claims.length>0&&(0,y.jsxs)("div",{children:[(0,y.jsx)("h4",{className:"font-bold text-gray-700 mb-2",children:"Detailed Claims Analysis:"}),(0,y.jsx)("ul",{className:"space-y-3",children:w.claims.map((e,t)=>(0,y.jsxs)("li",{className:"border-l-4 p-3 rounded-r-lg ".concat({Accurate:"border-green-500 bg-green-50",Inaccurate:"border-red-500 bg-red-50",Unverifiable:"border-gray-400 bg-gray-100",Error:"border-red-500 bg-red-50"}[e.verdict]||"border-gray-400 bg-gray-100"),children:[(0,y.jsxs)("p",{className:"font-semibold text-gray-800",children:["Claim: ",(0,y.jsxs)("span",{className:"font-normal",children:['"',e.claim,'"']})]}),(0,y.jsxs)("p",{className:"text-gray-700 mt-1",children:[(0,y.jsx)("strong",{children:"Evaluation:"})," ",e.evaluation]})]},t))})]})]})]}),(0,y.jsxs)("div",{className:"mb-8",children:[(0,y.jsxs)("h2",{className:"text-xl font-bold text-primary-700 mb-4 flex items-center gap-2",children:[(0,y.jsx)(x,{className:"h-6 w-6"})," Translate"]}),(0,y.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,y.jsxs)("select",{value:L,onChange:e=>R(e.target.value),className:"rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,y.jsx)("option",{value:"hi",children:"Hindi"}),(0,y.jsx)("option",{value:"es",children:"Spanish"}),(0,y.jsx)("option",{value:"fr",children:"French"}),(0,y.jsx)("option",{value:"zh",children:"Chinese"}),(0,y.jsx)("option",{value:"de",children:"German"}),(0,y.jsx)("option",{value:"ar",children:"Arabic"})]}),(0,y.jsx)("button",{onClick:async()=>{E(!0),S("");try{const e=await s.A.post("".concat("http://localhost:5000","/api/ai/translate"),{text:H,targetLang:L},{headers:{"x-auth-token":V}});S(e.data.translation)}catch(e){n.oR.error("Translation failed")}finally{E(!1)}},className:"px-4 py-2 rounded-md bg-primary-600 text-white font-medium hover:bg-primary-700",disabled:I,children:I?"Translating...":"Translate"})]}),C&&(0,y.jsx)("div",{className:"bg-yellow-50 rounded-lg p-4 text-yellow-900 whitespace-pre-line",children:C})]}),(0,y.jsxs)("div",{children:[(0,y.jsxs)("h2",{className:"text-xl font-bold text-primary-700 mb-4 flex items-center gap-2",children:[(0,y.jsx)(g,{className:"h-6 w-6"})," Comments"]}),(0,y.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!_.trim())return;O(!0);const t=a.url||a.link;if(!t||"string"!==typeof t||!t.startsWith("http"))return n.oR.error("No valid URL for this article."),void O(!1);try{await s.A.post("".concat("http://localhost:5000","/api/news/external/comment"),{url:t,content:_},{headers:{"x-auth-token":V}}),D(""),P(e=>!e)}catch(r){n.oR.error("Failed to add comment")}finally{O(!1)}},className:"flex gap-2 mb-4",children:[(0,y.jsx)("input",{type:"text",value:_,onChange:e=>D(e.target.value),className:"flex-1 rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Add a comment...",disabled:W}),(0,y.jsx)("button",{type:"submit",className:"px-4 py-2 rounded-md bg-primary-600 text-white font-medium hover:bg-primary-700",disabled:W||!_.trim(),children:W?"Posting...":"Post"})]}),(0,y.jsx)("div",{className:"space-y-4",children:0===T.length?(0,y.jsx)("div",{className:"text-gray-500",children:"No comments yet."}):T.map((e,t)=>{var a,r,l,s,n;return(0,y.jsxs)("div",{className:"flex items-start gap-3 bg-gray-50 rounded-xl p-4 shadow-sm",children:[null!==(a=e.user)&&void 0!==a&&a.profilePicture?(0,y.jsx)("img",{src:e.user.profilePicture,alt:"profile",className:"h-10 w-10 rounded-full object-cover"}):(0,y.jsx)("span",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 font-bold text-lg",children:(null===(r=e.user)||void 0===r||null===(l=r.name)||void 0===l||null===(s=l[0])||void 0===s?void 0:s.toUpperCase())||"?"}),(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{className:"flex items-center gap-2",children:[(0,y.jsx)("span",{className:"font-bold text-gray-800 text-base",children:(null===(n=e.user)||void 0===n?void 0:n.name)||"User"}),(0,y.jsx)("span",{className:"text-xs text-gray-400",children:new Date(e.createdAt).toLocaleString()})]}),(0,y.jsx)("p",{className:"text-gray-700 mt-1",children:e.content})]})]},t)})})]})]})]})})})}},5215:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(3986),l=a(9950);const s=["title","titleId"];function n(e,t){let{title:a,titleId:n}=e,i=(0,r.A)(e,s);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),a?l.createElement("title",{id:n},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"}))}const i=l.forwardRef(n)},6460:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(3986),l=a(9950);const s=["title","titleId"];function n(e,t){let{title:a,titleId:n}=e,i=(0,r.A)(e,s);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),a?l.createElement("title",{id:n},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z"}))}const i=l.forwardRef(n)},9961:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(3986),l=a(9950);const s=["title","titleId"];function n(e,t){let{title:a,titleId:n}=e,i=(0,r.A)(e,s);return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),a?l.createElement("title",{id:n},a):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const i=l.forwardRef(n)}}]);