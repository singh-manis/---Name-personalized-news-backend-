"use strict";(self.webpackChunkpersonalized_news_frontend=self.webpackChunkpersonalized_news_frontend||[]).push([[977],{3977:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var s=a(9379),r=a(9950),l=a(8429),o=a(6910),c=a(9348),m=a(4414);const n=["technology","science","business","health","entertainment","sports","politics","education"];function d(){const e=(0,l.Zp)(),{id:t}=(0,l.g)(),a=Boolean(t),[d,i]=(0,r.useState)(!1),[u,x]=(0,r.useState)(!1),[p,g]=(0,r.useState)({title:"",content:"",summary:"",category:"",imageUrl:"",videoUrl:"",podcastUrl:"",tags:""});(0,r.useEffect)(()=>{a&&h()},[t]);const h=async()=>{i(!0);try{const e=localStorage.getItem("token"),a=await o.A.get("".concat("http://localhost:5000","/api/news/article/").concat(t),{headers:{"x-auth-token":e}});g({title:a.data.title||"",content:a.data.content||"",summary:a.data.summary||"",category:a.data.category||"",imageUrl:a.data.imageUrl||"",videoUrl:a.data.videoUrl||"",podcastUrl:a.data.podcastUrl||"",tags:(a.data.tags||[]).join(", ")}),x(!1),i(!1)}catch(e){e.response&&404===e.response.status?x(!0):c.oR.error("Failed to fetch article"),i(!1)}},y=e=>{g((0,s.A)((0,s.A)({},p),{},{[e.target.name]:e.target.value}))};return u?(0,m.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Article Not Found"}),(0,m.jsx)("button",{onClick:()=>e("/admin"),className:"bg-primary-600 text-white px-4 py-2 rounded hover:bg-primary-700",children:"Back to Admin"})]}):(0,m.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:a?"Edit Article":"Add New Article"}),(0,m.jsxs)("form",{onSubmit:async r=>{r.preventDefault(),i(!0);try{const r=localStorage.getItem("token"),l=(0,s.A)((0,s.A)({},p),{},{tags:p.tags.split(",").map(e=>e.trim()).filter(Boolean)});a?(await o.A.put("".concat("http://localhost:5000","/api/news/article/").concat(t),l,{headers:{"x-auth-token":r}}),c.oR.success("Article updated")):(await o.A.post("".concat("http://localhost:5000","/api/news/article"),l,{headers:{"x-auth-token":r}}),c.oR.success("Article created")),e("/admin")}catch(l){c.oR.error("Failed to save article")}finally{i(!1)}},className:"space-y-6 bg-white rounded-lg shadow-md p-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,m.jsx)("input",{type:"text",name:"title",value:p.title,onChange:y,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Summary"}),(0,m.jsx)("textarea",{name:"summary",value:p.summary,onChange:y,required:!0,rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Content"}),(0,m.jsx)("textarea",{name:"content",value:p.content,onChange:y,required:!0,rows:6,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,m.jsxs)("select",{name:"category",value:p.category,onChange:y,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",children:[(0,m.jsx)("option",{value:"",children:"Select category"}),n.map(e=>(0,m.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Image URL"}),(0,m.jsx)("input",{type:"text",name:"imageUrl",value:p.imageUrl,onChange:y,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Video URL"}),(0,m.jsx)("input",{type:"text",name:"videoUrl",value:p.videoUrl,onChange:y,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Podcast URL"}),(0,m.jsx)("input",{type:"text",name:"podcastUrl",value:p.podcastUrl,onChange:y,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tags (comma separated)"}),(0,m.jsx)("input",{type:"text",name:"tags",value:p.tags,onChange:y,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),(0,m.jsx)("div",{className:"flex justify-end",children:(0,m.jsx)("button",{type:"submit",disabled:d,className:"bg-primary-600 text-white px-4 py-2 rounded hover:bg-primary-700",children:d?"Saving...":a?"Update Article":"Create Article"})})]})]})}}}]);