"use strict";(self.webpackChunkpersonalized_news_frontend=self.webpackChunkpersonalized_news_frontend||[]).push([[802],{2171:()=>{},6802:(e,s,l)=>{l.r(s),l.d(s,{default:()=>o});var t=l(9950),a=l(6910),i=l(9348),r=l(6187),d=l(2146),n=l(7818),c=(l(2171),l(4414));function o(){var e,s,l;const[d,o]=(0,t.useState)(null),[x,m]=(0,t.useState)(!0),{t:h}=(0,n.Bd)();(0,t.useEffect)(()=>{p()},[]);const p=async()=>{try{const e=localStorage.getItem("token"),s=await a.A.get("".concat("http://localhost:5000","/api/user/analytics"),{headers:{"x-auth-token":e}});o(s.data),m(!1)}catch(e){i.oR.error("Failed to fetch analytics"),m(!1)}},f=(null===d||void 0===d||d.topicsCovered,(null===d||void 0===d||null===(e=d.topicPreferences)||void 0===e?void 0:e.map(e=>e.count))||[]),b=(null===d||void 0===d||null===(s=d.topicPreferences)||void 0===s?void 0:s.map(e=>e.name))||[],u={labels:b,datasets:[{label:h("Articles Read"),data:f,backgroundColor:"rgba(59,130,246,0.7)"}]},g={labels:b,datasets:[{label:h("Articles by Topic"),data:f,backgroundColor:["#fbbf24","#60a5fa","#34d399","#f87171","#a78bfa","#f472b6","#facc15","#38bdf8"]}]};return x?(0,c.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,c.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,c.jsx)("div",{className:"modern-bg min-h-screen py-8",children:(0,c.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,c.jsx)("h1",{className:"text-4xl font-extrabold text-primary-700 mb-10 tracking-tight drop-shadow",children:h("Reading Analytics")}),(0,c.jsxs)("div",{className:"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3",children:[(0,c.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 flex flex-col items-center border border-gray-100",children:[(0,c.jsx)("h2",{className:"text-xl font-bold text-primary-700 mb-6",children:h("Reading Statistics")}),(0,c.jsxs)("div",{className:"flex flex-col gap-6 w-full",children:[(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[(0,c.jsx)("span",{className:"inline-block h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-2xl font-bold text-blue-600 shadow",children:(null===d||void 0===d?void 0:d.totalArticlesRead)||0}),(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"text-sm text-gray-500",children:h("Total Articles Read")})})]}),(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[(0,c.jsx)("span",{className:"inline-block h-10 w-10 rounded-full bg-green-100 flex items-center justify-center text-2xl font-bold text-green-600 shadow",children:(null===d||void 0===d?void 0:d.totalTimeSpent)||0}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-sm text-gray-500",children:h("Total Time Spent")}),(0,c.jsx)("span",{className:"text-xs text-gray-400",children:h("min")})]})]}),(0,c.jsxs)("div",{className:"flex items-center gap-4",children:[(0,c.jsx)("span",{className:"inline-block h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center text-2xl font-bold text-purple-600 shadow",children:(null===d||void 0===d?void 0:d.savedArticles)||0}),(0,c.jsx)("div",{children:(0,c.jsx)("p",{className:"text-sm text-gray-500",children:h("Articles Saved")})})]})]})]}),(0,c.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 flex flex-col border border-gray-100",children:[(0,c.jsx)("h2",{className:"text-xl font-bold text-primary-700 mb-6",children:h("Topic Preferences")}),b.length>0?(0,c.jsx)(r.yP,{data:u,options:{responsive:!0,plugins:{legend:{display:!1},title:{display:!1}},scales:{y:{beginAtZero:!0}}}}):(0,c.jsx)("p",{className:"text-gray-500",children:h("No topic data yet.")})]}),(0,c.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 flex flex-col border border-gray-100",children:[(0,c.jsx)("h2",{className:"text-xl font-bold text-primary-700 mb-6",children:h("Topic Distribution")}),b.length>0?(0,c.jsx)(r.Fq,{data:g,options:{responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1}}}}):(0,c.jsx)("p",{className:"text-gray-500",children:h("No topic data yet.")})]})]}),(0,c.jsxs)("div",{className:"mt-10 bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[(0,c.jsx)("h2",{className:"text-xl font-bold text-primary-700 mb-6",children:h("Reading Insights")}),(0,c.jsx)("div",{className:"space-y-4",children:null===d||void 0===d||null===(l=d.insights)||void 0===l?void 0:l.map((e,s)=>(0,c.jsxs)("div",{className:"flex items-start",children:[(0,c.jsx)("div",{className:"flex-shrink-0",children:(0,c.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center",children:(0,c.jsx)("span",{className:"text-primary-600 text-sm font-medium",children:s+1})})}),(0,c.jsx)("div",{className:"ml-4",children:(0,c.jsx)("p",{className:"text-sm text-gray-900",children:e})})]},s))})]})]})})}d.t1.register(d.PP,d.kc,d.E8,d.hE,d.m_,d.s$,d.Bs)}}]);